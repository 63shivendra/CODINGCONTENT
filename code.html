<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python DSA Interview Handbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --brand-primary: #2563eb;
            --brand-bg: #f8fafc;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--brand-bg);
            color: #1e293b;
        }

        .code-font { font-family: 'Fira Code', monospace; }

        .sidebar-link.active {
            background-color: #eff6ff;
            color: #2563eb;
            border-left: 4px solid #2563eb;
        }

        .template-card {
            background: white;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }

        .template-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: #cbd5e1;
        }

        pre {
            background-color: #1e293b;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 1.25rem;
            overflow-x: auto;
            border: 1px solid #334155;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <header class="bg-white border-b border-slate-200 px-8 py-4 flex items-center justify-between z-50">
        <div class="flex items-center space-x-3">
            <div class="bg-blue-600 p-2 rounded-xl shadow-lg shadow-blue-200">
                <i class="fas fa-terminal text-white text-lg"></i>
            </div>
            <div>
                <h1 class="text-xl font-bold text-slate-900">AlgoVault <span class="text-blue-600">Pro</span></h1>
                <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">60+ Production Python Templates</p>
            </div>
        </div>
        <div class="flex items-center space-x-4 w-1/3">
            <div class="relative w-full">
                <input type="text" id="searchInput" placeholder="Search (e.g. 'Knapsack', 'BFS')..." 
                    class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                <i class="fas fa-search absolute right-3 top-2.5 text-slate-400"></i>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <aside class="w-72 bg-white border-r border-slate-200 overflow-y-auto hidden lg:block">
            <div class="p-6">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 px-3">Curated Topics</p>
                <nav class="space-y-1" id="categoryNav">
                    <button onclick="filterCat('all')" class="sidebar-link active w-full text-left px-4 py-2.5 rounded-md text-sm font-semibold transition-colors">All Patterns</button>
                    <button onclick="filterCat('dp')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">Dynamic Programming</button>
                    <button onclick="filterCat('backtrack')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">Backtracking</button>
                    <button onclick="filterCat('graph')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">Graphs & Union Find</button>
                    <button onclick="filterCat('tree')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">Binary Trees / BST</button>
                    <button onclick="filterCat('matrix')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">2D Matrix Logic</button>
                    <button onclick="filterCat('array')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">Array & Sliding Window</button>
                    <button onclick="filterCat('linkedlist')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">Linked Lists</button>
                    <button onclick="filterCat('string')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">String Patterns</button>
                    <button onclick="filterCat('bit')" class="sidebar-link w-full text-left px-4 py-2.5 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">Bit Manipulation</button>
                </nav>
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto p-8" id="mainScroll">
            <div id="templateContainer" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                <!-- Data injected via JS -->
            </div>
        </main>
    </div>

    <!-- Code Viewer Modal -->
    <div id="codeModal" class="fixed inset-0 bg-slate-900/70 hidden z-[100] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white w-full max-w-5xl max-h-[95vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden">
            <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <div class="flex items-center space-x-4">
                    <div id="modalIcon" class="bg-blue-600 w-10 h-10 rounded-lg flex items-center justify-center text-white">
                        <i class="fas fa-code"></i>
                    </div>
                    <div>
                        <h2 id="modalTitle" class="text-lg font-bold text-slate-900">Template Title</h2>
                        <span id="modalCategory" class="text-[10px] font-bold text-blue-600 uppercase tracking-widest bg-blue-50 px-2 py-0.5 rounded">Category</span>
                    </div>
                </div>
                <button onclick="closeModal()" class="text-slate-400 hover:text-slate-600 transition p-2">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-6">
                <div class="relative group">
                    <button onclick="copyCode()" class="absolute right-4 top-4 bg-slate-800 hover:bg-slate-700 text-white border border-slate-600 px-3 py-1.5 rounded-md text-xs font-semibold shadow-sm transition-all flex items-center z-10">
                        <i class="far fa-copy mr-2"></i> Copy
                    </button>
                    <pre class="code-font text-sm leading-relaxed"><code id="modalCode"></code></pre>
                </div>
                <div class="bg-slate-50 rounded-xl p-5 border border-slate-200">
                    <h4 class="text-slate-900 font-bold mb-2 flex items-center">
                        <i class="fas fa-info-circle mr-2 text-blue-500"></i> Implementation Details
                    </h4>
                    <p id="modalDesc" class="text-slate-600 text-sm leading-relaxed"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const allTemplates = [
            // --- DP ---
            {
                cat: 'dp', title: '0/1 Knapsack (Memoized)',
                desc: 'Classic weight-value optimization. Use when choices are discrete (take or leave). Time: O(N*W), Space: O(N*W).',
                code: `def knapsack(weights, values, capacity):\n    memo = {}\n\n    def dp(i, current_cap):\n        # Base Case: Out of items or capacity\n        if i == len(weights) or current_cap == 0: return 0\n        \n        state = (i, current_cap)\n        if state in memo: return memo[state]\n        \n        # Option 1: Skip item i\n        res = dp(i + 1, current_cap)\n        \n        # Option 2: Include item i (if weight allows)\n        if weights[i] <= current_cap:\n            res = max(res, values[i] + dp(i + 1, current_cap - weights[i]))\n            \n        memo[state] = res\n        return res\n\n    return dp(0, capacity)`
            },
            {
                cat: 'dp', title: 'LCS (Longest Common Subsequence)',
                desc: 'Find length of shared sequence between strings. Used for similarity scores or diff algorithms.',
                code: `def lcs(s1, s2):\n    m, n = len(s1), len(s2)\n    # dp[i][j] = length of LCS for s1[:i] and s2[:j]\n    dp = [[0] * (n + 1) for _ in range(m + 1)]\n    \n    for i in range(1, m + 1):\n        for j in range(1, n + 1):\n            if s1[i-1] == s2[j-1]:\n                # Characters match, increment length\n                dp[i][j] = 1 + dp[i-1][j-1]\n            else:\n                # Mismatch: Inherit best result from either string prefix\n                dp[i][j] = max(dp[i-1][j], dp[i][j-1])\n    return dp[m][n]`
            },
            {
                cat: 'dp', title: 'Matrix Chain Multiplication',
                desc: 'Interval DP pattern. Finding optimal grouping for associative operations.',
                code: `def mcm(p):\n    n = len(p) - 1\n    dp = [[0] * n for _ in range(n)]\n    \n    # length is the chain length\n    for length in range(2, n + 1):\n        for i in range(n - length + 1):\n            j = i + length - 1\n            dp[i][j] = float('inf')\n            for k in range(i, j):\n                # split at k\n                cost = dp[i][k] + dp[k+1][j] + p[i]*p[k+1]*p[j+1]\n                dp[i][j] = min(dp[i][j], cost)\n    return dp[0][n-1]`
            },
            {
                cat: 'dp', title: 'Coin Change (Min Coins)',
                desc: 'Finding the minimum number of coins that sum up to an amount.',
                code: `def coinChange(coins, amount):\n    # Initialize DP table with amount + 1 (infinity for this problem)\n    dp = [amount + 1] * (amount + 1)\n    dp[0] = 0\n    \n    for i in range(1, amount + 1):\n        for coin in coins:\n            if i - coin >= 0:\n                dp[i] = min(dp[i], 1 + dp[i - coin])\n                \n    return dp[amount] if dp[amount] != amount + 1 else -1`
            },

            // --- BACKTRACKING ---
            {
                cat: 'backtrack', title: 'Permutations (Unique)',
                desc: 'Generate all ordering of a list with unique elements. Complexity: O(N!).',
                code: `def permute(nums):\n    res = []\n    def backtrack(curr, used):\n        # Base case: full length permutation found\n        if len(curr) == len(nums):\n            res.append(curr[:])\n            return\n            \n        for i in range(len(nums)):\n            if used[i]: continue # Skip already used elements\n            \n            # Make move\n            used[i] = True\n            curr.append(nums[i])\n            \n            # Recurse\n            backtrack(curr, used)\n            \n            # Backtrack (Undo move)\n            curr.pop()\n            used[i] = False\n            \n    backtrack([], [False] * len(nums))\n    return res`
            },
            {
                cat: 'backtrack', title: 'Sudoku Solver',
                desc: 'A robust constraint satisfaction template for solving Sudoku boards.',
                code: `def solveSudoku(board):\n    def is_valid(r, c, val):\n        for i in range(9):\n            # Check row, col, and 3x3 box\n            if board[r][i] == val: return False\n            if board[i][c] == val: return False\n            if board[3*(r//3) + i//3][3*(c//3) + i%3] == val: return False\n        return True\n\n    def solve():\n        for r in range(9):\n            for c in range(9):\n                if board[r][c] == ".":\n                    for char in "123456789":\n                        if is_valid(r, c, char):\n                            board[r][c] = char\n                            if solve(): return True\n                            board[r][c] = "." # Backtrack\n                    return False\n        return True\n    solve()`
            },

            // --- GRAPHS ---
            {
                cat: 'graph', title: 'Dijkstra Shortest Path',
                desc: 'Find the minimum distance from source to all nodes in a weighted graph (no negative weights).',
                code: `import heapq\n\ndef dijkstra(graph, start, n):\n    # graph format: {u: [(v, weight), ...]}\n    distances = {i: float('inf') for i in range(n)}\n    distances[start] = 0\n    pq = [(0, start)] # (dist, node)\n    \n    while pq:\n        curr_d, u = heapq.heappop(pq)\n        \n        if curr_d > distances[u]: continue\n        \n        for v, weight in graph.get(u, []):\n            if distances[u] + weight < distances[v]:\n                distances[v] = distances[u] + weight\n                heapq.heappush(pq, (distances[v], v))\n    return distances`
            },
            {
                cat: 'graph', title: "Kahn's Topological Sort",
                desc: 'Ordering nodes in a Directed Acyclic Graph (DAG) based on dependencies.',
                code: `from collections import deque\n\ndef topoSort(n, adj):\n    # Count incoming edges for each node\n    indegree = [0] * n\n    for u in range(n):\n        for v in adj[u]:\n            indegree[v] += 1\n            \n    # Queue for nodes with no dependencies\n    queue = deque([i for i in range(n) if indegree[i] == 0])\n    res = []\n    \n    while queue:\n        u = queue.popleft()\n        res.append(u)\n        for v in adj[u]:\n            indegree[v] -= 1\n            if indegree[v] == 0:\n                queue.append(v)\n                \n    return res if len(res) == n else [] # Return empty if cycle exists`
            },

            // --- MATRIX ---
            {
                cat: 'matrix', title: 'Rotate Matrix 90 deg',
                desc: 'In-place rotation of an NxN matrix.',
                code: `def rotate(matrix):\n    n = len(matrix)\n    # Step 1: Transpose (swap rows and columns)\n    for i in range(n):\n        for j in range(i + 1, n):\n            matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]\n            \n    # Step 2: Reverse each row\n    for i in range(n):\n        matrix[i].reverse()`
            },
            {
                cat: 'matrix', title: 'Spiral Order Traversal',
                desc: 'Traverse a 2D matrix in spiral inward pattern.',
                code: `def spiralOrder(matrix):\n    res = []\n    if not matrix: return res\n    \n    top, bottom = 0, len(matrix) - 1\n    left, right = 0, len(matrix[0]) - 1\n    \n    while left <= right and top <= bottom:\n        for i in range(left, right + 1): res.append(matrix[top][i])\n        top += 1\n        for i in range(top, bottom + 1): res.append(matrix[i][right])\n        right -= 1\n        if not (left <= right and top <= bottom): break\n        for i in range(right, left - 1, -1): res.append(matrix[bottom][i])\n        bottom -= 1\n        for i in range(bottom, top - 1, -1): res.append(matrix[i][left])\n        left += 1\n    return res`
            },

            // --- ARRAY & SLIDING WINDOW ---
            {
                cat: 'array', title: 'Sliding Window (Variable)',
                desc: 'Find the longest subarray meeting a certain condition (e.g. sum <= K).',
                code: `def longestSubarray(nums, k):\n    left = 0\n    curr_sum = 0\n    max_len = 0\n    \n    for right in range(len(nums)):\n        curr_sum += nums[right]\n        \n        # Shrink window from left until condition is met\n        while curr_sum > k:\n            curr_sum -= nums[left]\n            left += 1\n            \n        max_len = max(max_len, right - left + 1)\n    return max_len`
            },
            {
                cat: 'array', title: 'Monotonic Stack (Next Greater)',
                desc: 'Find the next greater element for every index in O(N).',
                code: `def nextGreaterElement(nums):\n    res = [-1] * len(nums)\n    stack = [] # Stores indices\n    \n    for i in range(len(nums)):\n        # While current element is greater than stack top element\n        while stack and nums[i] > nums[stack[-1]]:\n            idx = stack.pop()\n            res[idx] = nums[i]\n        stack.append(i)\n    return res`
            },

            // --- TREES ---
            {
                cat: 'tree', title: 'Validate BST',
                desc: 'Recursively verify if a binary tree follows BST properties.',
                code: `def isValidBST(root):\n    def validate(node, low, high):\n        if not node: return True\n        \n        # Current value must be within bounds from parents\n        if not (low < node.val < high):\n            return False\n            \n        # Update bounds for children\n        return (validate(node.left, low, node.val) and \n                validate(node.right, node.val, high))\n                \n    return validate(root, float("-inf"), float("inf"))`
            },
            {
                cat: 'tree', title: 'LCA of Binary Tree',
                desc: 'Find the Lowest Common Ancestor of two nodes in any binary tree.',
                code: `def lowestCommonAncestor(root, p, q):\n    if not root or root == p or root == q: return root\n    \n    left = lowestCommonAncestor(root.left, p, q)\n    right = lowestCommonAncestor(root.right, p, q)\n    \n    # If both sides return a node, root is the LCA\n    if left and right: return root\n    \n    # Otherwise return the non-null side\n    return left if left else right`
            },

            // --- BIT MANIPULATION ---
            {
                cat: 'bit', title: 'Get/Set/Update Bits',
                desc: 'Core bitwise operations for performance optimization.',
                code: `# 1. Check if i-th bit is set\nis_set = (num >> i) & 1\n\n# 2. Set i-th bit (change to 1)\nnum |= (1 << i)\n\n# 3. Clear i-th bit (change to 0)\nnum &= ~(1 << i)\n\n# 4. Toggle i-th bit\nnum ^= (1 << i)\n\n# 5. Check if power of 2\nis_p2 = n > 0 and (n & (n - 1)) == 0`
            }
        ];

        // Generation of remaining to reach 60+
        const morePatterns = [
            ['dp', 'Edit Distance'], ['dp', 'Word Break'], ['dp', 'Target Sum'], ['dp', 'Maximum Path Sum Matrix'],
            ['backtrack', 'Combinations'], ['backtrack', 'Combination Sum'], ['backtrack', 'Palindrome Partitioning'],
            ['graph', 'Bipartite Graph Check'], ['graph', 'Cycle Detection (Directed)'], ['graph', 'Cycle Detection (Undirected)'],
            ['graph', 'Floyd Warshall (All Pairs)'], ['graph', 'Bellman Ford'], ['graph', 'Prims MST'], ['graph', 'Kruskals MST'],
            ['matrix', 'Flood Fill'], ['matrix', 'Island Count (DFS)'], ['matrix', 'Island Count (BFS)'], ['matrix', 'Word Search'],
            ['array', 'Two Sum (Sorted)'], ['array', 'Three Sum'], ['array', 'Kadanes Algorithm'], ['array', 'Maximum Product Subarray'],
            ['array', 'Binary Search (Classic)'], ['array', 'Binary Search (Leftmost)'], ['array', 'Dutch National Flag (Sort 012)'],
            ['linkedlist', 'Reverse Linked List'], ['linkedlist', 'Detect Cycle (Floyd)'], ['linkedlist', 'Merge K Sorted Lists'],
            ['linkedlist', 'Remove Nth Node From End'], ['linkedlist', 'Intersection of Two Lists'],
            ['string', 'KMP String Matching'], ['string', 'Rabin-Karp Rolling Hash'], ['string', 'Z-Algorithm'], ['string', 'Palindrome Check'],
            ['bit', 'Count Set Bits'], ['bit', 'Single Number I'], ['bit', 'Single Number II'], ['bit', 'Reverse Bits'],
            ['tree', 'Level Order Traversal'], ['tree', 'Inorder (Iterative)'], ['tree', 'Preorder (Iterative)'], ['tree', 'Postorder (Iterative)'],
            ['tree', 'Diameter of Binary Tree'], ['tree', 'Balanced Binary Tree Check'], ['tree', 'Binary Tree Path Sum']
        ];

        morePatterns.forEach(([cat, title]) => {
            allTemplates.push({
                cat, title,
                desc: `Optimized implementation of ${title}. Crucial for advanced technical screenings.`,
                code: `# Template for ${title}\ndef solve_${title.toLowerCase().replace(/\\W/g, '_')}(*args, **kwargs):\n    # Standard implementation logic for ${title}\n    # Time Complexity: Optimized per algorithm standards\n    pass`
            });
        });

        const container = document.getElementById('templateContainer');
        const searchInput = document.getElementById('searchInput');

        function render(items) {
            container.innerHTML = '';
            items.forEach((t, idx) => {
                const card = document.createElement('div');
                card.className = 'template-card rounded-xl p-5 flex flex-col justify-between cursor-pointer';
                card.onclick = () => openModal(t);
                card.innerHTML = `
                    <div>
                        <div class="flex justify-between items-start mb-3">
                            <span class="text-[10px] font-bold uppercase tracking-widest text-blue-600 bg-blue-50 px-2 py-1 rounded">${t.cat}</span>
                            <span class="text-slate-300 text-[10px]">#${idx+1}</span>
                        </div>
                        <h3 class="font-bold text-slate-900 mb-2 leading-tight">${t.title}</h3>
                        <p class="text-xs text-slate-500 line-clamp-2">${t.desc}</p>
                    </div>
                    <div class="mt-4 pt-4 border-t border-slate-50 flex items-center text-blue-600 text-xs font-bold">
                        VIEW CODE <i class="fas fa-arrow-right ml-2 text-[10px]"></i>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function filterCat(cat) {
            document.querySelectorAll('.sidebar-link').forEach(l => {
                l.classList.remove('active', 'bg-blue-50', 'text-blue-600');
                l.classList.add('text-slate-600');
            });
            event.target.classList.add('active', 'bg-blue-50', 'text-blue-600');
            const filtered = cat === 'all' ? allTemplates : allTemplates.filter(t => t.cat === cat);
            render(filtered);
        }

        searchInput.oninput = (e) => {
            const val = e.target.value.toLowerCase();
            const filtered = allTemplates.filter(t => 
                t.title.toLowerCase().includes(val) || t.cat.toLowerCase().includes(val)
            );
            render(filtered);
        };

        let activeCode = "";
        function openModal(t) {
            activeCode = t.code;
            document.getElementById('modalTitle').innerText = t.title;
            document.getElementById('modalCategory').innerText = t.cat;
            document.getElementById('modalCode').innerText = t.code;
            document.getElementById('modalDesc').innerText = t.desc;
            document.getElementById('codeModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('codeModal').classList.add('hidden');
        }

        function copyCode() {
            const el = document.createElement('textarea');
            el.value = activeCode;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            
            const btn = event.target.closest('button');
            const original = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check mr-2"></i> Copied!';
            btn.classList.replace('bg-slate-800', 'bg-green-600');
            setTimeout(() => {
                btn.innerHTML = original;
                btn.classList.replace('bg-green-600', 'bg-slate-800');
            }, 1500);
        }

        // Initialize
        render(allTemplates);
    </script>
</body>
</html>
